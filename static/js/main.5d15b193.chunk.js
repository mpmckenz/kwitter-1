(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{166:function(e,t,a){e.exports=a.p+"static/media/octo1.ea815713.gif"},187:function(e,t,a){e.exports=a.p+"static/media/octo1.a9d2acdf.png"},200:function(e,t,a){e.exports=a(362)},360:function(e,t,a){},362:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(56),o=a.n(r),c=a(17),i=a(18),l=a(25),u=a(24),p=a(26),m=a(373),h=a(374),d=a(372),g=(a(87),a(166)),E=a.n(g),f=a(370),b=a(30),_=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log(this.props.pathname),s.a.createElement("div",{className:"navWrapper"},s.a.createElement("ul",{className:"navBar"},s.a.createElement("li",null,s.a.createElement("img",{src:E.a,alt:"",className:"octo"})),s.a.createElement("li",{className:"navTitle"},"Kwitter")),s.a.createElement("ul",{className:"navBarLinks"},s.a.createElement("li",{className:"/edit"===this.props.pathname||"/home"===this.props.pathname||"/register"===this.props.pathname?"hide":""},s.a.createElement(f.a,{to:"/",id:"loginLink"},"Login")),s.a.createElement("li",{className:"/register"===this.props.pathname||"/"===this.props.pathname||"/logout"===this.props.pathname?"hide":""},s.a.createElement(f.a,{to:"/edit",id:"editLink"},"Edit Profile")),s.a.createElement("li",{className:"/register"===this.props.pathname||"/"===this.props.pathname||"/logout"===this.props.pathname||"/home"===this.props.pathname?"hide":""},s.a.createElement(f.a,{to:"/home",id:"homeLink"},"Homepage")),s.a.createElement("li",{className:"/register"===this.props.pathname?"hide":""},s.a.createElement(f.a,{to:"/register",id:"logoutLink"},"Sign up")),s.a.createElement("li",{className:"/"===this.props.pathname||"/logout"===this.props.pathname||"/register"===this.props.pathname?"hide":""},s.a.createElement(f.a,{to:"/logout",id:"logoutLink"},"Logout"))))}}]),t}(s.a.Component),y=Object(b.connect)(function(e){return{pathname:e.router.location.pathname}})(_),S=a(380),O=a(375),w=a(379),N=a(378),j=function(e,t){return{type:"LIKE_MESSAGE",payload:{tweet:e,user:t}}},v=function(e){return{type:"UNLIKE_MESSAGE",payload:e}},k=a(34),C=a(107),I=a.n(C),D=a(57),T=a(189),L=a(22),P={messages:[],profile:{username:null,password:null,token:null,id:null,success:null},users:[],logout:{success:!1,message:""},likes:[],userData:{id:0,username:"",displayName:"",createdAt:"",messages:[],about:""}},U=a(170),R=a(31),A=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||D.c,G=Object(R.a)({basename:"/kwitter-1"}),M=[Object(k.routerMiddleware)(G),U.a],F=Object(D.d)(Object(k.connectRouter)(G)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN_SUCCESS":return Object(L.a)({},e,{profile:Object(L.a)({},e.profile,{id:t.payload.userID,success:t.payload.success,token:t.payload.token})});case"GET_MESSAGES":return Object(L.a)({},e,{messages:t.messages,likes:t.userLikeMessageId});case"REGISTER":return Object(L.a)({},e,{displayName:t.displayName,username:t.username,password:t.password});case"NEW_POST":return Object(L.a)({},e,{message:t});case"LIKE":return Object(L.a)({},e,{messageId:t.messageId,likes:Object(T.a)(e.likes).concat([t.messageId])});case"DELETE_MESSAGE":return Object(L.a)({},e);case"GET_MESSAGE_ID":return Object(L.a)({},e,{likes:{liked:t.message}});case"GET_LOGOUT":return Object(L.a)({},e,{logout:{success:t.success,message:t.message},profile:{username:null,password:null,token:null,id:null,success:null},likes:[]});case"GET_USER":return Object(L.a)({},e,{users:t.users});case"GET_USER_BY_ID_SUCCESS":return Object(L.a)({},e,{userData:t.userData});case"DELETE_USER":return Object(L.a)({},e);case"UNLIKE":return Object(L.a)({},e,{likes:e.likes.filter(function(e){return e!==t.messageId})});case"PATCH_PASSWORD":case"PATCH_ABOUT":return Object(L.a)({},e);case"EDIT_PROFILE_SUCCESS":return Object(L.a)({},e,{userData:Object(L.a)({},e.userData,t.userData)});default:return e}}),A(D.a.apply(void 0,M))),x="GET_MESSAGES",B="https://kwitter-api.herokuapp.com";function J(){return function(e){I.a.get("https://kwitter-api.herokuapp.com/messages?limit=1000&offset=0").then(function(t){"OK"===t.statusText&&(e({type:x,payload:{messages:t.data.messages}}),e(Object(k.push)("/home")))}).catch(function(e){console.log(e)})}}var z=function(e,t,a){return{type:"USER_LOGIN_SUCCESS",payload:{token:e,success:t,userID:a}}},H=function(){return{type:"IS_LOGGING_IN"}},K=function(){return{type:"USER_LOGIN_FAIL"}},q=function(e){return function(t,a){if(F.getState().profile.success){var n=F.getState().profile.token,s="Bearer ".concat(n),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:s},body:JSON.stringify({messageId:e})};fetch(B+"/messages/"+e,r).then(function(e){F.dispatch({type:"DELETE_MESSAGE",messageId:e.messageId})}),F.dispatch(J()),F.dispatch(Object(k.push)("/"))}}},W=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).handleSubmitLogin=function(){a.props.userLogin(a.state.username,a.state.password)},a.handleChangeUser=function(e){a.setState({username:e.target.value})},a.handleChangePassword=function(e){a.setState({password:e.target.value})},a.handleRegisterLink=function(){a.props.registerLink()},a.state={username:"",password:""},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"login"},s.a.createElement(S.a,{className:"header",as:"h2"},"Sign In"),s.a.createElement(O.a,{size:"large"},s.a.createElement(O.a.Field,null,s.a.createElement("input",{className:"input",placeholder:"Username",value:this.state.username,onChange:this.handleChangeUser,required:!0,autoFocus:!0})),s.a.createElement(O.a.Field,null,s.a.createElement("input",{className:"input",placeholder:"Password",type:"password",onChange:this.handleChangePassword,value:this.state.password,required:!0})),s.a.createElement(w.a,{className:"submit-button",type:"submit",onClick:this.handleSubmitLogin},"Submit")),s.a.createElement(N.a,{className:"line",style:{boxShadow:"none"}},"_____________________________________"),s.a.createElement("div",null,s.a.createElement(N.a,{className:"message"},"Not a member?",s.a.createElement(f.a,{className:"link",to:"/register",onClick:this.handleRegisterLink}," ","Sign up"))))}}]),t}(n.Component),Y=Object(b.connect)(function(e){return{auth:e.auth,register:e.register}},function(e){return{userLogin:function(t,a){e(function(e,t){return function(a){a(H());var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};fetch("".concat(B,"/auth/login"),n).then(function(e){return e.json()}).then(function(e){e.success?(a(z(e.token,e.success,e.id)),a(Object(k.push)("/home"))):(a(K()),alert("Invalid username or password"))}).catch(function(e){return a(K())})}}(t,a))}}})(W),X=a(381),V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={displayName:"",username:"",password:"",passwordRepeat:"",passwordMatches:!0},a.handleChangeDisplayName=function(e){a.setState({displayName:e.target.value})},a.handleChangeUsername=function(e){a.setState({username:e.target.value})},a.handleChangePassword=function(e){a.setState({password:e.target.value})},a.handleChangeMatch=function(e){a.setState({passwordRepeat:e.target.value})},a.noMatch=function(){return s.a.createElement(X.a,{color:"red"},"Entered passwords do not match.")},a.usernameFail=function(){return s.a.createElement(X.a,{color:"red"},"Username taken. Choose a different username.")},a.handleLoginLink=function(){a.props.loginLink()},a.handleRegister=function(e){a.state.displayName&&a.state.username&&a.state.password===a.state.passwordRepeat&&(a.setState({passwordMatches:!0}),console.log("handle was called"),a.props.register({username:a.state.username,password:a.state.password,displayName:a.state.displayName})),a.state.password!==a.state.passwordRepeat?a.setState({passwordMatches:!1}):a.setState({passwordMatches:!0})},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"register"},s.a.createElement(S.a,{className:"header",as:"h2"},"Sign Up"),s.a.createElement(O.a,{size:"large"},s.a.createElement(O.a.Field,null,s.a.createElement("input",{className:"input",placeholder:"Display Name",value:this.state.displayName,onChange:this.handleChangeDisplayName,required:!0,autoFocus:!0})),s.a.createElement(O.a.Field,null,s.a.createElement("input",{className:"input",placeholder:"Username",value:this.state.username,onChange:this.handleChangeUsername,required:!0})),s.a.createElement(O.a.Field,null,s.a.createElement("input",{className:"input",placeholder:"Password",type:"password",value:this.state.password,onChange:this.handleChangePassword,required:!0})),s.a.createElement(O.a.Field,null,this.state.passwordMatches?null:this.noMatch(),s.a.createElement("input",{className:"input",placeholder:"Re-Enter Password",type:"password",value:this.state.passwordRepeat,onChange:this.handleChangeMatch,required:!0})),s.a.createElement(w.a,{className:"submit-button",onClick:this.handleRegister},"Register")),s.a.createElement("div",null,s.a.createElement("h3",null,this.props.result)),s.a.createElement(N.a,{className:"line",style:{boxShadow:"none"}},"_____________________________________"),s.a.createElement("div",null,s.a.createElement(N.a,{className:"message"},"Already signed up?",s.a.createElement(f.a,{className:"link",to:"/",onClick:this.handleLoginLink}," ","Login"))))}}]),t}(n.Component),$=Object(d.a)(Object(b.connect)(function(e){return{result:e.registerResult}},function(e){return{register:function(t){return e(function(e){return function(t){t({type:"REGISTER"}),fetch("https://kwitter-api.herokuapp.com/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.ok||e.json().then(function(e){throw e}),e.json()}).then(function(e){t({type:"REGISTER_SUCCESS",register:e,result:"Successfully Registered"}),t(Object(k.push)("/"))}).catch(function(e){t({type:"REGISTER_FAIL",result:"Failed to Register"}),alert("Username Taken. Please Choose another")})}}(t))}}})(V)),Q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={password:"",matchPassword:"",displayName:"",about:""},a.handleSubmitEditProfile=function(){a.props.editProfile(a.state.password,a.state.displayName,a.state.about),a.setState({password:"",matchPassword:"",displayName:"",about:""})},a.handleChangeDisplayName=function(e){a.setState({displayName:e.target.value})},a.handleChangePassword=function(e){a.setState({password:e.target.value})},a.handleChangeMatchPassword=function(e){a.setState({matchPassword:e.target.value})},a.handleChangeAbout=function(e){a.setState({about:e.target.value})},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"login"},s.a.createElement(S.a,{className:"header",as:"h2"},"Edit Profile"),s.a.createElement(O.a,{size:"large"},s.a.createElement(O.a.Field,null,s.a.createElement("input",{className:"aboutme",onChange:this.handleChangeAbout,value:this.state.about,placeholder:""===this.props.about?"About Me":this.props.about})),s.a.createElement(O.a.Field,null,s.a.createElement("input",{className:"input",onChange:this.handleChangeDisplayName,value:this.state.displayName,placeholder:""===this.props.displayName?"Display Name":this.props.displayName})),s.a.createElement(O.a.Field,null,s.a.createElement("input",{className:"input",type:"password",value:this.state.matchPassword,onChange:this.handleChangeMatchPassword,placeholder:"Update Password"}),s.a.createElement("input",{className:"input",type:"password",onChange:this.handleChangePassword,value:this.state.password,placeholder:"Re-enter New Password"})),s.a.createElement(w.a,{className:"submit-button",type:"submit",onClick:this.handleSubmitEditProfile},"Update")))}}]),t}(s.a.Component),Z=Object(b.connect)(function(e){return{loggedInUser:e.loggedInUser,displayName:e.userData.displayName,username:e.userData.username,about:e.userData.about}},function(e){return{editProfile:function(t,a,n){return e(function(e,t,a){return function(n){n({type:"EDIT_PROFILE"});var s=F.getState().profile.token,r={};e&&(r.password=e),t&&(r.displayName=t),a&&(r.about=a),fetch("https://kwitter-api.herokuapp.com/users",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(r)}).then(function(e){return e.ok||e.json().then(function(e){throw e}),e.json()}).then(function(e){n({type:"EDIT_PROFILE_SUCCESS",userData:e.user})}).catch(function(e){n({type:"EDIT_PROFILE_FAIL"})})}}(t,a,n))}}})(Q),ee=a(377),te=a(363),ae=a(371),ne=a(376),se=a(187),re=a.n(se),oe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={users:[]},a.formatDate=function(e){var t=e.substring(8,10),a=parseInt(e.substring(5,7),10),n=e.substring(0,4),s="";return s=e.substring(11,13)>12?e.substring(11,13)-12+e.substring(13,16)+" PM":e.substring(11,16)+" AM",t+" "+["","January","February","March","April","May","June","July","August","September","October","November","December"][a]+" "+n+" at "+s},a.handleLike=function(e,t){return function(){a.props.dispatch(j(e,t))}},a.handleUnlike=function(e){return function(){console.log(e),a.props.dispatch(v(e))}},a.delete=function(e){return function(){console.log("hello"),q(a.props.message)}},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://kwitter-api.herokuapp.com/users",{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors"}).then(function(e){return e.json()}).then(function(t){e.setState({users:t.users})})}},{key:"render",value:function(){var e,t=(e=this.props.messageId,function(t,a){if(F.getState().profile.success){var n=F.getState().profile.token,s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({messageId:e})};fetch(B+"/likes",s).then(function(e){return e.json()}).then(function(e){F.dispatch({type:"LIKE",messageId:e.messageId}),F.dispatch(J()),F.dispatch(Object(k.push)("/"))})}}),a=q(this.props.messageId);return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"ui medium feed segment"},s.a.createElement("div",{className:"event"},s.a.createElement("div",{className:"label"},s.a.createElement("img",{alt:"thumbnail",src:"https://picsum.photos/200?photo="+this.props.photo[this.props.userId].filename})),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"date"},this.formatDate(this.props.date)),s.a.createElement("div",null,s.a.createElement("p",{className:"userId"}," User: ",this.props.userId," ")),s.a.createElement("div",{className:"extra text"},this.props.text),s.a.createElement("div",{className:"meta"},s.a.createElement("button",{className:"like",type:"submit",onClick:t},s.a.createElement("i",{className:"like icon"})," ",this.props.likes.length," Likes")),s.a.createElement("div",{className:"meta"},s.a.createElement("button",{id:"delete-button",color:"red",onClick:a},"X"))))))}}]),t}(s.a.Component),ce=Object(b.connect)(function(e){return{username:e.userData.username}})(oe),ie="https://picsum.photos/list",le=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={messages:[]},a.componentDidMount=function(){fetch("https://kwitter-api.herokuapp.com/messages",{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors"}).then(function(e){return e.json()}).then(function(e){a.setState({messages:e.messages})}),fetch(ie).then(function(e){return e.json()}).then(function(e){a.setState({photos:e})}),fetch("https://kwitter-api.herokuapp.com/users",{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors"}).then(function(e){return e.json()}).then(function(e){a.setState({users:e.users})})},a.messagesSortedByDate=function(e){return e.sort(function(e,t){return Date.parse(t.createdAt)-Date.parse(e.createdAt)})},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.photos,t=void 0===e?[]:e;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"messages-list"},s.a.createElement("h3",null,"All Messages"),this.messagesSortedByDate(this.state.messages).map(function(e){return s.a.createElement(ce,{userId:e.userId,messageId:e.id,date:e.createdAt,text:e.text,likes:e.likes,photo:t})})))}}]),t}(n.Component),ue=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={text:""},a.handleOnChange=function(e){a.setState({text:e.target.value})},a.handleSubmit=function(e){a.props.addTweet({message:a.state.text}),a.setState({message:""})},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.GetUserByID()}},{key:"render",value:function(){return s.a.createElement("div",{className:"userHomepage"},s.a.createElement("div",{className:"userCard"},s.a.createElement(ee.a,null,s.a.createElement(te.a,{src:re.a}),s.a.createElement("div",{className:"userHomepageInfo"},s.a.createElement(ee.a.Content,null,s.a.createElement(ee.a.Header,null,this.props.displayname),s.a.createElement(ee.a.Meta,null,s.a.createElement("span",{className:"date"},this.props.username)),s.a.createElement(ee.a.Description,null,this.props.about)),s.a.createElement("br",null),s.a.createElement(ee.a.Content,{extra:!0},this.props.numOfPosts," posts")))),s.a.createElement("div",{className:"userFeed"},s.a.createElement(ae.a,{className:"newUserPost",placeholder:"What's new with you?",autoFocus:!0,onChange:this.handleOnChange}),s.a.createElement(w.a,{className:"submit-button",onClick:this.handleSubmit,type:"submit"},"Submit"),s.a.createElement(ne.a,null,s.a.createElement("hr",null),s.a.createElement(le,null)),s.a.createElement("hr",null)))}}]),t}(n.Component),pe=Object(b.connect)(function(e){return{loggedInUser:e.loggedInUser,displayname:e.userData.displayName,username:e.userData.username,about:e.userData.about,numOfPosts:e.userData.messages.length}},function(e){return{addTweet:function(t){return e(function(e){var t=e.message;return function(e,a){I()({method:"POST",url:"https://kwitter-api.herokuapp.com/messages",headers:{Authorization:"Bearer "+a().profile.token,"Content-Type":"application/json",charset:"utf-8"},data:{text:t}}).then(function(){e(J()),e(Object(k.push)("/"))}).catch(function(e){return console.log(e)})}}(t))},GetUserByID:function(){return e(function(e,t){e({type:"GET_USER_BY_ID"});var a=t().profile.id;fetch("https://kwitter-api.herokuapp.com/users/"+a).then(function(e){return e.ok||e.json().then(function(e){throw e}),e.json()}).then(function(t){e({type:"GET_USER_BY_ID_SUCCESS",userData:t.user})}).catch(function(t){e({type:"GET_USER_BY_ID_FAIL"})})})}}})(ue),me=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"background"},s.a.createElement(m.a,{component:y}),s.a.createElement(h.a,null,s.a.createElement(m.a,{exact:!0,path:"/",render:function(){return s.a.createElement(Y,null)}}),s.a.createElement(m.a,{path:"/register",render:function(){return s.a.createElement($,null)}}),s.a.createElement(m.a,{path:"/edit",render:function(){return s.a.createElement(Z,null)}}),s.a.createElement(m.a,{path:"/home",render:function(){return s.a.createElement(pe,null)}}),s.a.createElement(m.a,{path:"/logout",render:function(){return s.a.createElement(Y,null)}})))}}]),t}(n.Component),he=Object(d.a)(me);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(360);o.a.render(s.a.createElement(b.Provider,{store:F},s.a.createElement(k.ConnectedRouter,{history:G},s.a.createElement(he,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},87:function(e,t,a){}},[[200,2,1]]]);
//# sourceMappingURL=main.5d15b193.chunk.js.map